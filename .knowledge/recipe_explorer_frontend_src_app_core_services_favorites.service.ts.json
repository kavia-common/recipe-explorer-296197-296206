{"is_source_file": true, "format": "TypeScript", "description": "This file defines an Angular service 'FavoritesService' that manages user's favorite recipe IDs, persists them to localStorage, and provides reactive streams and utility methods to access and modify the favorites.", "external_files": ["../models/recipe.models"], "external_methods": [], "published": ["FavoritesService"], "classes": [{"name": "FavoritesService", "description": "An Angular service that manages favorite recipes via localStorage and provides a reactive Observable stream for UI updates."}], "methods": [{"name": "loadFromStorage", "description": "Reads the favorite recipe IDs from localStorage, parsing JSON, and initializes with seeded IDs if configured."}, {"name": "private persist(set: Set<string>) { persist", "description": "Stores the current set of favorite IDs into localStorage as a JSON string.", "scope": "FavoritesService", "scopeKind": "class"}, {"name": "get favoritesChanges$(): Observable<Set<string>> { favoritesChanges$", "description": "Provides an Observable stream of the current set of favorite IDs for reactive UI updates.", "scope": "FavoritesService", "scopeKind": "class"}, {"name": "isFavorite(id: string): boolean { isFavorite", "description": "Checks if a given recipe ID is marked as favorite.", "scope": "FavoritesService", "scopeKind": "class"}, {"name": "toggleFavorite(id: string): void { toggleFavorite", "description": "Adds or removes a recipe ID from favorites, updating reactive stream and storage.", "scope": "FavoritesService", "scopeKind": "class"}, {"name": "getFavorites(): string[] { getFavorites", "description": "Returns an array of favorite recipe IDs.", "scope": "FavoritesService", "scopeKind": "class"}, {"name": "getFavoriteRecipes(recipes: (RecipeSummary | RecipeDetail)[]): (RecipeSummary | RecipeDetail)[/ getFavoriteRecipes", "description": "Filters a list of recipes to those marked as favorites.", "scope": "FavoritesService", "scopeKind": "class"}, {"name": "get count(): number { count", "description": "Returns the total number of favorite recipes.", "scope": "FavoritesService", "scopeKind": "class"}, {"name": "private readonly favorites$ = new BehaviorSubject<Set<string>>(this.loadFromStorage()); this", "scope": "FavoritesService", "scopeKind": "class", "description": "unavailable"}], "calls": ["globalThis?.localStorage?.getItem(STORAGE_KEY)", "this.persist(seeded)", "globalThis?.localStorage?.setItem(STORAGE_KEY, JSON.stringify(arr))", "this.favorites$.asObservable()"], "search-terms": ["FavoritesService", "localStorage persistence", "favorite recipes", "Favorites management", "Reactive stream Angular"], "state": 2, "file_id": 45, "knowledge_revision": 123, "git_revision": "65c20e4468e88b94bfd288175acff5f2543e6e80", "revision_history": [{"109": ""}, {"123": "65c20e4468e88b94bfd288175acff5f2543e6e80"}], "ctags": [{"_type": "tag", "name": "ENABLE_SEEDED_FAVORITES", "path": "/home/kavia/workspace/code-generation/recipe-explorer-296197-296206/recipe_explorer_frontend/src/app/core/services/favorites.service.ts", "pattern": "/^const ENABLE_SEEDED_FAVORITES = false;$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "FavoritesService", "path": "/home/kavia/workspace/code-generation/recipe-explorer-296197-296206/recipe_explorer_frontend/src/app/core/services/favorites.service.ts", "pattern": "/^export class FavoritesService {$/", "language": "TypeScript", "kind": "class"}, {"_type": "tag", "name": "SEEDED_IDS", "path": "/home/kavia/workspace/code-generation/recipe-explorer-296197-296206/recipe_explorer_frontend/src/app/core/services/favorites.service.ts", "pattern": "/^const SEEDED_IDS = ['2', '5', '10'];$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "STORAGE_KEY", "path": "/home/kavia/workspace/code-generation/recipe-explorer-296197-296206/recipe_explorer_frontend/src/app/core/services/favorites.service.ts", "pattern": "/^const STORAGE_KEY = 'recipe_favorites';$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "arr", "path": "/home/kavia/workspace/code-generation/recipe-explorer-296197-296206/recipe_explorer_frontend/src/app/core/services/favorites.service.ts", "pattern": "/^        const arr = JSON.parse(raw) as string[];$/", "language": "TypeScript", "kind": "constant", "scope": "FavoritesService.this", "scopeKind": "method"}, {"_type": "tag", "name": "arr", "path": "/home/kavia/workspace/code-generation/recipe-explorer-296197-296206/recipe_explorer_frontend/src/app/core/services/favorites.service.ts", "pattern": "/^      const arr = Array.from(set);$/", "language": "TypeScript", "kind": "constant", "scope": "FavoritesService.persist", "scopeKind": "method"}, {"_type": "tag", "name": "count", "path": "/home/kavia/workspace/code-generation/recipe-explorer-296197-296206/recipe_explorer_frontend/src/app/core/services/favorites.service.ts", "pattern": "/^  get count(): number {$/", "language": "TypeScript", "kind": "method", "scope": "FavoritesService", "scopeKind": "class"}, {"_type": "tag", "name": "favorites$", "path": "/home/kavia/workspace/code-generation/recipe-explorer-296197-296206/recipe_explorer_frontend/src/app/core/services/favorites.service.ts", "pattern": "/^  private readonly favorites$ = new BehaviorSubject<Set<string>>(this.loadFromStorage());$/", "language": "TypeScript", "kind": "property", "scope": "FavoritesService", "scopeKind": "class"}, {"_type": "tag", "name": "favoritesChanges$", "path": "/home/kavia/workspace/code-generation/recipe-explorer-296197-296206/recipe_explorer_frontend/src/app/core/services/favorites.service.ts", "pattern": "/^  get favoritesChanges$(): Observable<Set<string>> {$/", "language": "TypeScript", "kind": "method", "scope": "FavoritesService", "scopeKind": "class"}, {"_type": "tag", "name": "getFavoriteRecipes", "path": "/home/kavia/workspace/code-generation/recipe-explorer-296197-296206/recipe_explorer_frontend/src/app/core/services/favorites.service.ts", "pattern": "/^  getFavoriteRecipes(recipes: (RecipeSummary | RecipeDetail)[]): (RecipeSummary | RecipeDetail)[/", "language": "TypeScript", "kind": "method", "scope": "FavoritesService", "scopeKind": "class"}, {"_type": "tag", "name": "getFavorites", "path": "/home/kavia/workspace/code-generation/recipe-explorer-296197-296206/recipe_explorer_frontend/src/app/core/services/favorites.service.ts", "pattern": "/^  getFavorites(): string[] {$/", "language": "TypeScript", "kind": "method", "scope": "FavoritesService", "scopeKind": "class"}, {"_type": "tag", "name": "ids", "path": "/home/kavia/workspace/code-generation/recipe-explorer-296197-296206/recipe_explorer_frontend/src/app/core/services/favorites.service.ts", "pattern": "/^    const ids = this.favorites$.value;$/", "language": "TypeScript", "kind": "constant", "scope": "FavoritesService.getFavoriteRecipes", "scopeKind": "method"}, {"_type": "tag", "name": "isFavorite", "path": "/home/kavia/workspace/code-generation/recipe-explorer-296197-296206/recipe_explorer_frontend/src/app/core/services/favorites.service.ts", "pattern": "/^  isFavorite(id: string): boolean {$/", "language": "TypeScript", "kind": "method", "scope": "FavoritesService", "scopeKind": "class"}, {"_type": "tag", "name": "next", "path": "/home/kavia/workspace/code-generation/recipe-explorer-296197-296206/recipe_explorer_frontend/src/app/core/services/favorites.service.ts", "pattern": "/^    const next = new Set(this.favorites$.value);$/", "language": "TypeScript", "kind": "constant", "scope": "FavoritesService.toggleFavorite", "scopeKind": "method"}, {"_type": "tag", "name": "persist", "path": "/home/kavia/workspace/code-generation/recipe-explorer-296197-296206/recipe_explorer_frontend/src/app/core/services/favorites.service.ts", "pattern": "/^  private persist(set: Set<string>) {$/", "language": "TypeScript", "kind": "method", "scope": "FavoritesService", "scopeKind": "class"}, {"_type": "tag", "name": "raw", "path": "/home/kavia/workspace/code-generation/recipe-explorer-296197-296206/recipe_explorer_frontend/src/app/core/services/favorites.service.ts", "pattern": "/^      const raw = globalThis?.localStorage?.getItem(STORAGE_KEY);$/", "language": "TypeScript", "kind": "constant", "scope": "FavoritesService.this", "scopeKind": "method"}, {"_type": "tag", "name": "seeded", "path": "/home/kavia/workspace/code-generation/recipe-explorer-296197-296206/recipe_explorer_frontend/src/app/core/services/favorites.service.ts", "pattern": "/^        const seeded = new Set(SEEDED_IDS);$/", "language": "TypeScript", "kind": "constant", "scope": "FavoritesService.this", "scopeKind": "method"}, {"_type": "tag", "name": "this", "path": "/home/kavia/workspace/code-generation/recipe-explorer-296197-296206/recipe_explorer_frontend/src/app/core/services/favorites.service.ts", "pattern": "/^  private readonly favorites$ = new BehaviorSubject<Set<string>>(this.loadFromStorage());$/", "language": "TypeScript", "kind": "method", "scope": "FavoritesService", "scopeKind": "class"}, {"_type": "tag", "name": "toggleFavorite", "path": "/home/kavia/workspace/code-generation/recipe-explorer-296197-296206/recipe_explorer_frontend/src/app/core/services/favorites.service.ts", "pattern": "/^  toggleFavorite(id: string): void {$/", "language": "TypeScript", "kind": "method", "scope": "FavoritesService", "scopeKind": "class"}], "hash": "74e8a3dad57b9ca39138481670d31365", "format-version": 4, "code-base-name": "recipe_explorer_frontend", "filename": "recipe_explorer_frontend/src/app/core/services/favorites.service.ts", "fields": [{"name": "private readonly favorites$ = new BehaviorSubject<Set<string>>(this.loadFromStorage());", "scope": "FavoritesService", "scopeKind": "class", "description": "unavailable"}]}