{"is_source_file": true, "format": "TypeScript", "description": "This file defines an Angular service FavoritesService that manages a collection of favorite recipe IDs. It uses localStorage for persistence and exposes reactive streams via RxJS BehaviorSubject for components to subscribe to changes in favorites asynchronously.", "external_files": ["../models/recipe.models"], "external_methods": [], "published": ["FavoritesService"], "classes": [{"name": "FavoritesService", "description": "Angular injectable service that manages favorite recipes using localStorage and provides reactive updates."}], "methods": [{"name": "loadFromStorage", "description": "Reads the set of favorite recipe IDs from localStorage, handling errors gracefully."}, {"name": "private saveToStorage(set: Set<string>) { saveToStorage", "description": "Persists the current set of favorite recipe IDs to localStorage.", "scope": "FavoritesService", "scopeKind": "class"}, {"name": "get favoritesChanges$(): Observable<Set<string>> { favoritesChanges$", "description": "Provides an observable stream of favorite recipe ID sets for components to subscribe to.", "scope": "FavoritesService", "scopeKind": "class"}, {"name": "isFavorite(id: string): boolean { isFavorite", "description": "Checks if a specific recipe ID is marked as favorite.", "scope": "FavoritesService", "scopeKind": "class"}, {"name": "toggleFavorite(id: string): void { toggleFavorite", "description": "Adds or removes a recipe ID from the favorites set, updating the observable stream and localStorage.", "scope": "FavoritesService", "scopeKind": "class"}, {"name": "getFavorites(): string[] { getFavorites", "description": "Returns an array of all favorite recipe IDs.", "scope": "FavoritesService", "scopeKind": "class"}, {"name": "getFavoriteRecipes(recipes: (RecipeSummary | RecipeDetail)[]): (RecipeSummary | RecipeDetail)[/ getFavoriteRecipes", "description": "Filters a list of recipes to only include those marked as favorites.", "scope": "FavoritesService", "scopeKind": "class"}, {"name": "get count(): number { count", "description": "Returns the total number of favorite recipes.", "scope": "FavoritesService", "scopeKind": "class"}, {"name": "private readonly favorites$ = new BehaviorSubject<Set<string>>(this.loadFromStorage()); this", "scope": "FavoritesService", "scopeKind": "class", "description": "unavailable"}], "calls": ["globalThis?.localStorage?.getItem", "globalThis?.localStorage?.setItem", "this.favorites$.value.has", "this.favorites$.value.size"], "search-terms": ["FavoritesService", "localStorage persistence", "RxJS BehaviorSubject", "recipe_favorites", "favorite recipe IDs"], "state": 2, "file_id": 45, "knowledge_revision": 109, "git_revision": "", "ctags": [{"_type": "tag", "name": "FavoritesService", "path": "/home/kavia/workspace/code-generation/recipe-explorer-296197-296206/recipe_explorer_frontend/src/app/core/services/favorites.service.ts", "pattern": "/^export class FavoritesService {$/", "language": "TypeScript", "kind": "class"}, {"_type": "tag", "name": "STORAGE_KEY", "path": "/home/kavia/workspace/code-generation/recipe-explorer-296197-296206/recipe_explorer_frontend/src/app/core/services/favorites.service.ts", "pattern": "/^const STORAGE_KEY = 'recipe_favorites';$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "arr", "path": "/home/kavia/workspace/code-generation/recipe-explorer-296197-296206/recipe_explorer_frontend/src/app/core/services/favorites.service.ts", "pattern": "/^      const arr = Array.from(set);$/", "language": "TypeScript", "kind": "constant", "scope": "FavoritesService.saveToStorage", "scopeKind": "method"}, {"_type": "tag", "name": "arr", "path": "/home/kavia/workspace/code-generation/recipe-explorer-296197-296206/recipe_explorer_frontend/src/app/core/services/favorites.service.ts", "pattern": "/^      const arr = JSON.parse(raw) as string[];$/", "language": "TypeScript", "kind": "constant", "scope": "FavoritesService.this", "scopeKind": "method"}, {"_type": "tag", "name": "count", "path": "/home/kavia/workspace/code-generation/recipe-explorer-296197-296206/recipe_explorer_frontend/src/app/core/services/favorites.service.ts", "pattern": "/^  get count(): number {$/", "language": "TypeScript", "kind": "method", "scope": "FavoritesService", "scopeKind": "class"}, {"_type": "tag", "name": "favorites$", "path": "/home/kavia/workspace/code-generation/recipe-explorer-296197-296206/recipe_explorer_frontend/src/app/core/services/favorites.service.ts", "pattern": "/^  private readonly favorites$ = new BehaviorSubject<Set<string>>(this.loadFromStorage());$/", "language": "TypeScript", "kind": "property", "scope": "FavoritesService", "scopeKind": "class"}, {"_type": "tag", "name": "favoritesChanges$", "path": "/home/kavia/workspace/code-generation/recipe-explorer-296197-296206/recipe_explorer_frontend/src/app/core/services/favorites.service.ts", "pattern": "/^  get favoritesChanges$(): Observable<Set<string>> {$/", "language": "TypeScript", "kind": "method", "scope": "FavoritesService", "scopeKind": "class"}, {"_type": "tag", "name": "getFavoriteRecipes", "path": "/home/kavia/workspace/code-generation/recipe-explorer-296197-296206/recipe_explorer_frontend/src/app/core/services/favorites.service.ts", "pattern": "/^  getFavoriteRecipes(recipes: (RecipeSummary | RecipeDetail)[]): (RecipeSummary | RecipeDetail)[/", "language": "TypeScript", "kind": "method", "scope": "FavoritesService", "scopeKind": "class"}, {"_type": "tag", "name": "getFavorites", "path": "/home/kavia/workspace/code-generation/recipe-explorer-296197-296206/recipe_explorer_frontend/src/app/core/services/favorites.service.ts", "pattern": "/^  getFavorites(): string[] {$/", "language": "TypeScript", "kind": "method", "scope": "FavoritesService", "scopeKind": "class"}, {"_type": "tag", "name": "ids", "path": "/home/kavia/workspace/code-generation/recipe-explorer-296197-296206/recipe_explorer_frontend/src/app/core/services/favorites.service.ts", "pattern": "/^    const ids = this.favorites$.value;$/", "language": "TypeScript", "kind": "constant", "scope": "FavoritesService.getFavoriteRecipes", "scopeKind": "method"}, {"_type": "tag", "name": "isFavorite", "path": "/home/kavia/workspace/code-generation/recipe-explorer-296197-296206/recipe_explorer_frontend/src/app/core/services/favorites.service.ts", "pattern": "/^  isFavorite(id: string): boolean {$/", "language": "TypeScript", "kind": "method", "scope": "FavoritesService", "scopeKind": "class"}, {"_type": "tag", "name": "next", "path": "/home/kavia/workspace/code-generation/recipe-explorer-296197-296206/recipe_explorer_frontend/src/app/core/services/favorites.service.ts", "pattern": "/^    const next = new Set(this.favorites$.value);$/", "language": "TypeScript", "kind": "constant", "scope": "FavoritesService.toggleFavorite", "scopeKind": "method"}, {"_type": "tag", "name": "raw", "path": "/home/kavia/workspace/code-generation/recipe-explorer-296197-296206/recipe_explorer_frontend/src/app/core/services/favorites.service.ts", "pattern": "/^      const raw = globalThis?.localStorage?.getItem(STORAGE_KEY);$/", "language": "TypeScript", "kind": "constant", "scope": "FavoritesService.this", "scopeKind": "method"}, {"_type": "tag", "name": "saveToStorage", "path": "/home/kavia/workspace/code-generation/recipe-explorer-296197-296206/recipe_explorer_frontend/src/app/core/services/favorites.service.ts", "pattern": "/^  private saveToStorage(set: Set<string>) {$/", "language": "TypeScript", "kind": "method", "scope": "FavoritesService", "scopeKind": "class"}, {"_type": "tag", "name": "this", "path": "/home/kavia/workspace/code-generation/recipe-explorer-296197-296206/recipe_explorer_frontend/src/app/core/services/favorites.service.ts", "pattern": "/^  private readonly favorites$ = new BehaviorSubject<Set<string>>(this.loadFromStorage());$/", "language": "TypeScript", "kind": "method", "scope": "FavoritesService", "scopeKind": "class"}, {"_type": "tag", "name": "toggleFavorite", "path": "/home/kavia/workspace/code-generation/recipe-explorer-296197-296206/recipe_explorer_frontend/src/app/core/services/favorites.service.ts", "pattern": "/^  toggleFavorite(id: string): void {$/", "language": "TypeScript", "kind": "method", "scope": "FavoritesService", "scopeKind": "class"}], "hash": "8f4270d65ec61de78c344d060778cefe", "format-version": 4, "code-base-name": "recipe_explorer_frontend", "filename": "recipe_explorer_frontend/src/app/core/services/favorites.service.ts", "fields": [{"name": "private readonly favorites$ = new BehaviorSubject<Set<string>>(this.loadFromStorage());", "scope": "FavoritesService", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"109": ""}]}